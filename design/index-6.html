<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow">
<meta name="theme-color" content="#111827">

<title>Mobile Database Admin</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: #0f172a;
  color: #e5e7eb;
  font-size: 13px;
}

/* TOOLBAR */
.table-toolbar {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px;
  background: #020617;
  position: sticky;
  top: 0;
  z-index: 20;
}

.table-toolbar select {
  padding: 5px 8px;
  background: #020617;
  border: 1px solid #334155;
  color: #e5e7eb;
  border-radius: 4px;
}

.toolbar-actions {
  display: flex;
  gap: 6px;
}

.toolbar-actions button {
  padding: 6px 8px;
  background: #020617;
  border: 1px solid #334155;
  color: #cbd5f5;
  border-radius: 4px;
  cursor: pointer;
}

.toolbar-actions button:hover {
  color: #60a5fa;
}

.insert-btn {
  padding: 6px 12px;
  background: #2563eb;
  border: none;
  color: #fff;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
}

.row-count {
  margin-left: auto;
  color: #94a3b8;
  font-size: 12px;
}

/* SELECTION TOOLBAR */
.selection-toolbar {
  display: none;
  align-items: center;
  gap: 6px;
  padding: 8px;
  background: #1e293b;
  position: sticky;
  top: 42px;
  z-index: 19;
  border-bottom: 1px solid #334155;
}

.selection-toolbar button {
  padding: 6px 8px;
  background: #334155;
  border: 1px solid #475569;
  color: #e5e7eb;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
}

.selection-toolbar button:hover {
  background: #475569;
}

.selection-info {
  margin-left: auto;
  color: #94a3b8;
  font-size: 12px;
}

/* TABLE */
.table-wrap {
  height: calc(100vh - 42px);
  overflow: auto;
}

.db-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.db-table th,
.db-table td {
  padding: 5px 8px;
  border-bottom: 1px solid #1e293b;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.db-table th {
  background: #020617;
  position: sticky;
  top: 0;
  z-index: 10;
  text-align: left;
}

.db-table tr:hover td {
  background: #020617;
}

td[contenteditable="true"] {
  outline: 1px dashed #2563eb;
  background: #020617;
}

/* Checkbox column */
.db-table th:first-child,
.db-table td:first-child {
  width: 40px;
  text-align: center;
  padding-left: 12px;
  padding-right: 12px;
}

.db-table input[type="checkbox"] {
  margin: 0;
  cursor: pointer;
}
</style>
</head>

<body>

<!-- MAIN TOOLBAR -->
<div class="table-toolbar">
  <select>
    <option>users</option>
    <option>projects</option>
    <option>payments</option>
    <option>settings</option>
  </select>

  <div class="toolbar-actions">
    <button title="Refresh"><i class="fa-solid fa-rotate"></i></button>
    <button title="Structure"><i class="fa-solid fa-table-columns"></i></button>
    <button title="Truncate"><i class="fa-solid fa-trash"></i></button>
  </div>

  <button class="insert-btn">
    <i class="fa-solid fa-plus"></i> 
  </button>

  <span class="row-count">Rows: 8</span>
</div>

<!-- SELECTION TOOLBAR -->
<div class="selection-toolbar" id="selectionToolbar">
  <button title="Edit selected"><i class="fa-solid fa-pen"></i> Edit</button>
  <button title="Delete selected"><i class="fa-solid fa-trash"></i> Delete</button>
  <button title="Export selected"><i class="fa-solid fa-download"></i> Export</button>
  <span class="selection-info" id="selectionInfo">0 rows selected</span>
</div>

<!-- TABLE -->
<div class="table-wrap">
<table class="db-table" id="dataTable">
<thead>
<tr>
  <th><input type="checkbox" id="selectAll"></th>
  <th style="width:60px">ID</th>
  <th>Username</th>
  <th>Email</th>
  <th>Role</th>
  <th>Status</th>
  <th>Created</th>
</tr>
</thead>

<tbody>
<tr>
  <td><input type="checkbox" class="row-checkbox" data-id="1"></td>
  <td>1</td>
  <td ondblclick="edit(this)">admin</td>
  <td ondblclick="edit(this)">admin@site.com</td>
  <td ondblclick="edit(this)">Owner</td>
  <td ondblclick="edit(this)">Active</td>
  <td>2024-10-01</td>
</tr>

<tr>
  <td><input type="checkbox" class="row-checkbox" data-id="2"></td>
  <td>2</td>
  <td ondblclick="edit(this)">lodwick</td>
  <td ondblclick="edit(this)">lodwick@mail.com</td>
  <td ondblclick="edit(this)">Developer</td>
  <td ondblclick="edit(this)">Active</td>
  <td>2024-10-12</td>
</tr>

<tr>
  <td><input type="checkbox" class="row-checkbox" data-id="3"></td>
  <td>3</td>
  <td ondblclick="edit(this)">jane_doe</td>
  <td ondblclick="edit(this)">jane@example.com</td>
  <td ondblclick="edit(this)">Editor</td>
  <td ondblclick="edit(this)">Pending</td>
  <td>2024-10-15</td>
</tr>

<tr>
  <td><input type="checkbox" class="row-checkbox" data-id="4"></td>
  <td>4</td>
  <td ondblclick="edit(this)">john_smith</td>
  <td ondblclick="edit(this)">john@example.com</td>
  <td ondblclick="edit(this)">Viewer</td>
  <td ondblclick="edit(this)">Active</td>
  <td>2024-10-18</td>
</tr>
</tbody>
</table>
</div>

<script>
let selectedRows = new Set();

function edit(cell) {
  const old = cell.innerText;
  cell.contentEditable = true;
  cell.focus();

  const range = document.createRange();
  range.selectNodeContents(cell);
  const sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);

  cell.onblur = () => {
    cell.contentEditable = false;
    if (cell.innerText !== old) {
      cell.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
      setTimeout(() => cell.innerText = old, 600);
    }
  };
}

// Select All checkbox functionality
document.getElementById('selectAll').addEventListener('change', function(e) {
  const checkboxes = document.querySelectorAll('.row-checkbox');
  const isChecked = e.target.checked;
  
  checkboxes.forEach(cb => {
    cb.checked = isChecked;
    const rowId = cb.getAttribute('data-id');
    if (isChecked) {
      selectedRows.add(rowId);
    } else {
      selectedRows.delete(rowId);
    }
  });
  
  updateSelectionToolbar();
});

// Individual row checkbox functionality
document.addEventListener('change', function(e) {
  if (e.target.classList.contains('row-checkbox')) {
    const rowId = e.target.getAttribute('data-id');
    
    if (e.target.checked) {
      selectedRows.add(rowId);
    } else {
      selectedRows.delete(rowId);
      // Uncheck selectAll if any checkbox is unchecked
      document.getElementById('selectAll').checked = false;
    }
    
    updateSelectionToolbar();
  }
});

// Update selection toolbar visibility and info
function updateSelectionToolbar() {
  const selectionToolbar = document.getElementById('selectionToolbar');
  const selectionInfo = document.getElementById('selectionInfo');
  const selectAllCheckbox = document.getElementById('selectAll');
  
  if (selectedRows.size > 0) {
    selectionToolbar.style.display = 'flex';
    selectionInfo.textContent = selectedRows.size + ' row' + (selectedRows.size !== 1 ? 's' : '') + ' selected';
    
    // Check if all checkboxes are selected
    const totalCheckboxes = document.querySelectorAll('.row-checkbox').length;
    selectAllCheckbox.checked = selectedRows.size === totalCheckboxes;
  } else {
    selectionToolbar.style.display = 'none';
    selectAllCheckbox.checked = false;
  }
}

// Selection toolbar button actions
document.querySelectorAll('.selection-toolbar button').forEach(button => {
  button.addEventListener('click', function() {
    const action = this.title || this.textContent;
    if (selectedRows.size > 0) {
      alert(action + ' ' + selectedRows.size + ' selected row(s): ' + Array.from(selectedRows).join(', '));
      // Here you would typically make an AJAX request to perform the action
    }
  });
});

// Initialize
updateSelectionToolbar();
</script>

</body>
</html>